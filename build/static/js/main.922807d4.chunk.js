(this["webpackJsonptime-tracking-app"]=this["webpackJsonptime-tracking-app"]||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a,r,c,i=n(0),s=n.n(i),o=n(17),d=n.n(o),l=n(149),u=n(152),j=n(148),b=n(61),m=n(23),h=n(154),O=n(155),f=n(78),p=n(150),T=n(142),x=n(62),g=n(151),k="\n  timespent\n  startdate\n  enddate\n  running\n  notes\n  task{\n    id\n  }\n  contact {\n    id\n    fullname\n  }\n",v=Object(g.a)(a||(a=Object(x.a)(["\nquery GET_TASKS {\n  tasks(\n    input: {\n      limit: 10\n      orderby: { name: asc }\n      where: {\n          displaytype:{NEQ:heading},\n          status: { EQ: active } }\n    }\n  ) {\n    id\n    name\n    timerecords {\n      ","\n    }\n    taskTotalTimespent: timespent\n  }\n}\n"])),k),S=Object(g.a)(r||(r=Object(x.a)(["\nmutation START_TIMERECORD($input: StartTimerecordInput) {\n  startTimerecord(input: $input) {\n    ","\n  }\n}\n"])),k),C=Object(g.a)(c||(c=Object(x.a)(["\nmutation STOP_TIMERECORD($input: StartTimerecordInput) {\n  stopTimerecord(input: $input) {\n   ","\n  }\n}\n"])),k),y=n(141),E=n(157),I=n(140),N=n(139),R=n(159),B=n(4),M=Object(N.a)((function(e){return{root:{padding:e.spacing(1),"&:hover":{background:"#B6F3ED"},border:"1px solid #B6F3ED",borderRadius:4,"&:not(:last-child)":{marginBottom:10}}}})),A=function(e){var t=e.id,n=e.name,a=e.setCurrentTaskId,r=M(),c=Object(i.useCallback)((function(e){var t=e.currentTarget.getAttribute("data-id");t&&a(t)}),[a]);return Object(B.jsx)(R.a,{onClick:c,"data-id":t,className:r.root,children:n})},w=Object(i.memo)(A),D=Object(N.a)((function(e){return{root:{padding:e.spacing(2),background:"rgb(205, 242, 238, 0.1)",marginBottom:e.spacing(2)},header:{textAlign:"center"}}})),P=function(e){var t=e.tasks,n=e.setCurrentTaskId,a=D();return Object(B.jsxs)(E.a,{className:a.root,children:[Object(B.jsx)(I.a,{className:a.header,children:"Tasks"}),Object(B.jsx)(y.a,{children:t.map((function(e,t){return Object(B.jsx)(w,{id:e.id,name:"".concat(t+1,". ").concat(e.name),setCurrentTaskId:n},e.id)}))})]})},H=Object(i.memo)(P),$=n(143),F=n(66),Q=n.n(F),_=function(e){var t=String(e).length<=2?2:String(e).length;return String(e).padStart(t,"0")},q=function(e){var t=String(e).length<=2?2:String(e).length;return String(e).padStart(t,"0")},G=function(e){return{hours:_(Math.floor(e%864e5/36e5)),mins:_(Math.floor(e%36e5/6e4)),secs:_(Math.floor(e%6e4/1e3))}},J=function(e){return{hours:q(Math.floor(e%1440/60)),mins:q(Math.floor(e%60))}},U=Object(N.a)((function(e){return{root:{padding:e.spacing(1),width:"100%"}}})),W=function(e){var t=e.enddate,n=e.notes,a=e.startdate,r=e.timespent,c=e.trackedBy,i=U(),s="hh:mm DD MMM",o=Q()(a).format(s),d=Q()(t).format(s),l=J(r),u=l.hours,j=l.mins;return Object(B.jsx)(R.a,{children:Object(B.jsxs)(E.a,{className:i.root,children:[Object(B.jsxs)(I.a,{children:["Start: ",o.toString()]}),Object(B.jsxs)(I.a,{children:["End: ",d.toString()]}),Object(B.jsxs)(I.a,{children:["Time tracked: ",u,":",j]}),Object(B.jsxs)(I.a,{children:["Notes: ",n]}),Object(B.jsxs)(I.a,{children:["Tracked by: ",c]})]})})},z=Object(i.memo)(W),K=Object(N.a)((function(){return{header:{textAlign:"center"}}})),Y=function(e){var t=e.timerecords,n=e.taskTotalTimespent,a=K();return 0===t.length?Object(B.jsxs)(p.a,{className:a.header,children:[Object(B.jsx)(I.a,{children:"Time Records"}),Object(B.jsx)(I.a,{children:"This task has no time records"})]}):Object(B.jsxs)(p.a,{children:[Object(B.jsx)(I.a,{className:a.header,children:"Time Records"}),Object(B.jsx)(y.a,{children:t.map((function(e){var t=e.enddate,n=e.notes,a=e.contact,r=e.startdate,c=e.timespent;return Object(B.jsx)(z,{enddate:t,notes:n,trackedBy:a.fullname,startdate:r,timespent:c},r)}))}),Object(B.jsxs)(I.a,{children:["Total time spent: ",n,"min"]})]})},L=Object(i.memo)(Y),V=n(80),X=n.n(V),Z=Object(N.a)((function(){return{root:{textAlign:"center"}}})),ee=function(e){var t=e.isStartedTimer,n=e.isCurrentTask,a=e.shouldRefreshTimer,r=e.setShouldRefreshTimer,c=Z(),s=X()({interval:1e3}),o=s[0],d=s[2],l=s[4],u=s[5];Object(i.useEffect)((function(){t?d():l()}),[t,d,l]),Object(i.useEffect)((function(){a&&(u(),r(!1))}),[a,r,u]);var j=G(o),b=j.hours,m=j.mins,h=j.secs;return Object(B.jsx)(p.a,{className:c.root,children:Object(B.jsx)(I.a,{component:"span",variant:"h2",children:n?"".concat(b,":").concat(m,":").concat(h):"00:00:00"})})},te=Object(i.memo)(ee),ne=Object(N.a)((function(e){return{root:{padding:e.spacing(2),background:"rgb(205, 242, 238, 0.1)","& > :not(:last-child)":{marginBottom:e.spacing(2)}},header:{textAlign:"center"},buttons:{display:"flex",justifyContent:"center","& > :not(:last-child)":{marginRight:e.spacing(3)}}}})),ae=function(e){var t,n=e.currentTask,a=e.handleStopTimerById,r=e.handleStartTimerById,c=e.activeTimer,s=ne(),o=Object(i.useState)(!1),d=Object(m.a)(o,2),l=d[0],u=d[1],j=Object(i.useState)(!1),b=Object(m.a)(j,2),h=b[0],O=b[1],f=Object(i.useCallback)((function(){var e;c&&(null===n||void 0===n?void 0:n.id)!==(null===c||void 0===c||null===(e=c.task)||void 0===e?void 0:e.id)&&O(!0),u(!0),r()}),[u,r,c,n]),p=Object(i.useCallback)((function(){u(!1),a()}),[u,a]);if(!n)return Object(B.jsx)(E.a,{className:s.root,children:Object(B.jsx)(I.a,{className:s.header,children:"Please, select task"})});var x=n.name,g=n.timerecords,k=n.taskTotalTimespent,v=n.id===(null===c||void 0===c||null===(t=c.task)||void 0===t?void 0:t.id),S=!v||!(null===c||void 0===c?void 0:c.running),C=!S;return Object(B.jsxs)(E.a,{className:s.root,children:[Object(B.jsx)(I.a,{className:s.header,children:x}),Object(B.jsx)(te,{isStartedTimer:l,isCurrentTask:v,shouldRefreshTimer:h,setShouldRefreshTimer:O}),Object(B.jsxs)(T.a,{className:s.buttons,children:[Object(B.jsx)($.a,{onClick:f,variant:"outlined",disabled:C,children:"Start Timer"}),Object(B.jsx)($.a,{onClick:p,variant:"outlined",disabled:S,children:"Stop Timer"})]}),Object(B.jsx)(L,{timerecords:g,taskTotalTimespent:k})]})},re=Object(i.memo)(ae),ce=function(){var e=Object(b.b)().enqueueSnackbar,t=Object(i.useState)([]),n=Object(m.a)(t,2),a=n[0],r=n[1],c=Object(h.a)(v),s=c.data,o=c.loading,d=c.error,l=c.refetch,u=Object(O.a)(S),j=Object(m.a)(u,2),x=j[0],g=j[1].error,k=Object(O.a)(C),y=Object(m.a)(k,2),E=y[0],I=y[1].error;Object(i.useEffect)((function(){s&&r(s.tasks)}),[s]),Object(i.useEffect)((function(){var t=d||g||I;t&&e(t.message,{variant:"error"})}),[d,g,I,e]);var N=Object(i.useState)(""),R=Object(m.a)(N,2),M=R[0],A=R[1],w=Object(i.useMemo)((function(){return a.find((function(e){return e.id===M}))||null}),[M,a]),D=Object(i.useState)(null),P=Object(m.a)(D,2),$=P[0],F=P[1],Q=Object(i.useCallback)((function(){x({variables:{input:{taskid:M}}}).then((function(e){var t=e.data;$&&l(),F(null===t||void 0===t?void 0:t.startTimerecord)}))}),[M,x,$,l]),_=Object(i.useCallback)((function(){E({variables:{input:{taskid:M}}}).then((function(e){e.data;F(null),l()}))}),[M,E,l]);return Object(B.jsxs)(p.a,{p:4,children:[Object(B.jsxs)(T.a,{container:!0,spacing:2,children:[Object(B.jsx)(T.a,{item:!0,xs:6,children:Object(B.jsx)(H,{tasks:a,setCurrentTaskId:A})}),Object(B.jsx)(T.a,{item:!0,xs:6,children:Object(B.jsx)(re,{currentTask:w,handleStopTimerById:_,handleStartTimerById:Q,activeTimer:$})})]}),o&&Object(B.jsx)(f.a,{style:{position:"absolute",top:"50%",left:"50%"}})]})},ie=(n(112),new l.a({uri:"https://graph.proworkflow.com/DevTestyehor/",headers:{Authorization:"AHWO-B7UC-QHCG-PHDU-PWFPHYI-TR114857"},cache:new u.a}));d.a.render(Object(B.jsx)(s.a.StrictMode,{children:Object(B.jsx)(j.a,{client:ie,children:Object(B.jsx)(b.a,{maxSnack:3,children:Object(B.jsx)(ce,{})})})}),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.922807d4.chunk.js.map