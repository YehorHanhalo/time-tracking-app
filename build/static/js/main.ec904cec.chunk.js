(this["webpackJsonptime-tracking-app"]=this["webpackJsonptime-tracking-app"]||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a,r,c,s=n(0),i=n.n(s),o=n(17),d=n.n(o),l=n(149),u=n(152),j=n(148),b=n(61),m=n(23),h=n(154),O=n(155),f=n(78),p=n(150),T=n(142),k=n(62),x=n(151),g="\n  timespent\n  startdate\n  enddate\n  running\n  notes\n  task{\n    id\n  }\n  contact {\n    id\n    fullname\n  }\n",v=Object(x.a)(a||(a=Object(k.a)(["\nquery GET_TASKS {\n  tasks(\n    input: {\n      limit: 10\n      orderby: { name: asc }\n      where: {\n          displaytype:{NEQ:heading},\n          status: { EQ: active } }\n    }\n  ) {\n    id\n    name\n    timerecords {\n      ","\n    }\n    taskTotalTimespent: timespent\n  }\n}\n"])),g),S=Object(x.a)(r||(r=Object(k.a)(["\nmutation START_TIMERECORD($input: StartTimerecordInput) {\n  startTimerecord(input: $input) {\n    ","\n  }\n}\n"])),g),C=Object(x.a)(c||(c=Object(k.a)(["\nmutation STOP_TIMERECORD($input: StartTimerecordInput) {\n  stopTimerecord(input: $input) {\n   ","\n  }\n}\n"])),g),y=n(141),E=n(157),I=n(140),B=n(139),N=n(159),R=n(5),M=n(4),D=Object(B.a)((function(e){return{root:{padding:e.spacing(1),"&:hover":{background:"#B6F3ED"},border:"1px solid #B6F3ED",borderRadius:4,"&:not(:last-child)":{marginBottom:10}},selected:{background:"#B6F3ED"}}})),w=function(e){var t=e.id,n=e.name,a=e.setCurrentTaskId,r=e.isCurrentTask,c=D(),i=Object(s.useCallback)((function(e){a(t)}),[a,t]);return Object(M.jsx)(N.a,{onClick:i,className:Object(R.a)(c.root,r&&c.selected),children:n})},A=Object(s.memo)(w),P=Object(B.a)((function(e){return{root:{padding:e.spacing(2),background:"rgb(205, 242, 238, 0.1)",marginBottom:e.spacing(2)},header:{textAlign:"center"}}})),F=function(e){var t=e.tasks,n=e.setCurrentTaskId,a=e.currentTaskId,r=P();return Object(M.jsxs)(E.a,{className:r.root,children:[Object(M.jsx)(I.a,{className:r.header,children:"Tasks"}),Object(M.jsx)(y.a,{children:t.map((function(e,t){var r=a===e.id;return Object(M.jsx)(A,{id:e.id,name:"".concat(t+1,". ").concat(e.name),setCurrentTaskId:n,isCurrentTask:r},e.id)}))})]})},H=Object(s.memo)(F),$=n(143),Q=n(66),_=n.n(Q),q=function(e){var t=String(e).length<=2?2:String(e).length;return String(e).padStart(t,"0")},G=function(e){var t=String(e).length<=2?2:String(e).length;return String(e).padStart(t,"0")},J=function(e){return{hours:q(Math.floor(e%864e5/36e5)),mins:q(Math.floor(e%36e5/6e4)),secs:q(Math.floor(e%6e4/1e3))}},U=function(e){return{hours:G(Math.floor(e%1440/60)),mins:G(Math.floor(e%60))}},W=Object(B.a)((function(e){return{root:{padding:e.spacing(1),width:"100%"}}})),z=function(e){var t=e.enddate,n=e.notes,a=e.startdate,r=e.timespent,c=e.trackedBy,s=W(),i="hh:mm DD MMM",o=_()(a).format(i),d=_()(t).format(i),l=U(r),u=l.hours,j=l.mins;return Object(M.jsx)(N.a,{children:Object(M.jsxs)(E.a,{className:s.root,children:[Object(M.jsxs)(I.a,{children:["Start: ",o.toString()]}),Object(M.jsxs)(I.a,{children:["End: ",d.toString()]}),Object(M.jsxs)(I.a,{children:["Time tracked: ",u,":",j]}),Object(M.jsxs)(I.a,{children:["Notes: ",n]}),Object(M.jsxs)(I.a,{children:["Tracked by: ",c]})]})})},K=Object(s.memo)(z),Y=Object(B.a)((function(){return{header:{textAlign:"center"}}})),L=function(e){var t=e.timerecords,n=e.taskTotalTimespent,a=Y();return 0===t.length?Object(M.jsxs)(p.a,{className:a.header,children:[Object(M.jsx)(I.a,{children:"Time Records"}),Object(M.jsx)(I.a,{children:"This task has no time records"})]}):Object(M.jsxs)(p.a,{children:[Object(M.jsx)(I.a,{className:a.header,children:"Time Records"}),Object(M.jsx)(y.a,{children:t.map((function(e){var t=e.enddate,n=e.notes,a=e.contact,r=e.startdate,c=e.timespent;return Object(M.jsx)(K,{enddate:t,notes:n,trackedBy:a.fullname,startdate:r,timespent:c},r)}))}),Object(M.jsxs)(I.a,{children:["Total time spent: ",n,"min"]})]})},V=Object(s.memo)(L),X=n(80),Z=n.n(X),ee=Object(B.a)((function(){return{root:{textAlign:"center"}}})),te=function(e){var t=e.isStartedTimer,n=e.isCurrentTask,a=e.shouldRefreshTimer,r=e.setShouldRefreshTimer,c=ee(),i=Z()({interval:1e3}),o=i[0],d=i[2],l=i[4],u=i[5];Object(s.useEffect)((function(){t?d():l()}),[t,d,l]),Object(s.useEffect)((function(){a&&(u(),r(!1))}),[a,r,u]);var j=J(o),b=j.hours,m=j.mins,h=j.secs;return Object(M.jsx)(p.a,{className:c.root,children:Object(M.jsx)(I.a,{component:"span",variant:"h2",children:n?"".concat(b,":").concat(m,":").concat(h):"00:00:00"})})},ne=Object(s.memo)(te),ae=Object(B.a)((function(e){return{root:{padding:e.spacing(2),background:"rgb(205, 242, 238, 0.1)","& > :not(:last-child)":{marginBottom:e.spacing(2)}},header:{textAlign:"center"},buttons:{display:"flex",justifyContent:"center","& > :not(:last-child)":{marginRight:e.spacing(3)}}}})),re=function(e){var t,n=e.currentTask,a=e.handleStopTimerById,r=e.handleStartTimerById,c=e.activeTimer,i=ae(),o=Object(s.useState)(!1),d=Object(m.a)(o,2),l=d[0],u=d[1],j=Object(s.useState)(!1),b=Object(m.a)(j,2),h=b[0],O=b[1],f=Object(s.useCallback)((function(){var e;c&&(null===n||void 0===n?void 0:n.id)!==(null===c||void 0===c||null===(e=c.task)||void 0===e?void 0:e.id)&&O(!0),u(!0),r()}),[u,r,c,n]),p=Object(s.useCallback)((function(){u(!1),a()}),[u,a]);if(!n)return Object(M.jsx)(E.a,{className:i.root,children:Object(M.jsx)(I.a,{className:i.header,children:"Please, select task"})});var k=n.name,x=n.timerecords,g=n.taskTotalTimespent,v=n.id===(null===c||void 0===c||null===(t=c.task)||void 0===t?void 0:t.id),S=!v||!(null===c||void 0===c?void 0:c.running),C=!S;return Object(M.jsxs)(E.a,{className:i.root,children:[Object(M.jsx)(I.a,{className:i.header,children:k}),Object(M.jsx)(ne,{isStartedTimer:l,isCurrentTask:v,shouldRefreshTimer:h,setShouldRefreshTimer:O}),Object(M.jsxs)(T.a,{className:i.buttons,children:[Object(M.jsx)($.a,{onClick:f,variant:"outlined",disabled:C,children:"Start Timer"}),Object(M.jsx)($.a,{onClick:p,variant:"outlined",disabled:S,children:"Stop Timer"})]}),Object(M.jsx)(V,{timerecords:x,taskTotalTimespent:g})]})},ce=Object(s.memo)(re),se=function(){var e=Object(b.b)().enqueueSnackbar,t=Object(s.useState)([]),n=Object(m.a)(t,2),a=n[0],r=n[1],c=Object(h.a)(v),i=c.data,o=c.loading,d=c.error,l=c.refetch,u=Object(O.a)(S),j=Object(m.a)(u,2),k=j[0],x=j[1].error,g=Object(O.a)(C),y=Object(m.a)(g,2),E=y[0],I=y[1].error;Object(s.useEffect)((function(){i&&r(i.tasks)}),[i]),Object(s.useEffect)((function(){var t=d||x||I;t&&e(t.message,{variant:"error"})}),[d,x,I,e]);var B=Object(s.useState)(""),N=Object(m.a)(B,2),R=N[0],D=N[1],w=Object(s.useMemo)((function(){return a.find((function(e){return e.id===R}))||null}),[R,a]),A=Object(s.useState)(null),P=Object(m.a)(A,2),F=P[0],$=P[1],Q=Object(s.useCallback)((function(){k({variables:{input:{taskid:R}}}).then((function(e){var t=e.data;F&&l(),$(null===t||void 0===t?void 0:t.startTimerecord)}))}),[R,k,F,l]),_=Object(s.useCallback)((function(){E({variables:{input:{taskid:R}}}).then((function(e){e.data;$(null),l()}))}),[R,E,l]);return Object(M.jsxs)(p.a,{p:4,children:[Object(M.jsxs)(T.a,{container:!0,spacing:2,children:[Object(M.jsx)(T.a,{item:!0,xs:6,children:Object(M.jsx)(H,{tasks:a,setCurrentTaskId:D,currentTaskId:R})}),Object(M.jsx)(T.a,{item:!0,xs:6,children:Object(M.jsx)(ce,{currentTask:w,handleStopTimerById:_,handleStartTimerById:Q,activeTimer:F})})]}),o&&Object(M.jsx)(f.a,{style:{position:"absolute",top:"50%",left:"50%"}})]})},ie=(n(112),new l.a({uri:"".concat("https://graph.proworkflow.com/DevTestyehor/"),headers:{Authorization:"".concat("AHWO-B7UC-QHCG-PHDU-PWFPHYI-TR114857")},cache:new u.a}));d.a.render(Object(M.jsx)(i.a.StrictMode,{children:Object(M.jsx)(j.a,{client:ie,children:Object(M.jsx)(b.a,{maxSnack:3,children:Object(M.jsx)(se,{})})})}),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.ec904cec.chunk.js.map